!function(e){e.fn.drawDPE=function(i){var t=e.extend({size:260,captionEnergy:["Logement économe","Logement énergivore","Logement"],colorEnergy:["#007D1C","#6DB410","#C8E306","#FFFF00","#FFB600","#FF6D00","#FF0000"],rangeEnergy:["<50","51 à 90","91 à 150","151 à 230","231 à 330","331 à 450","> 450"],limitEnergy:[50,90,150,230,330,450],unitEnergy:"kWh/m²/an",captionClimate:["Faible émission de GES","Forte émission de GES","Logement"],colorClimate:["#F5D7FE","#E79CFC","#D961FA","#CB25F8","#AC07DA","#7D059E","#4E0363"],rangeClimate:["<5","6 à 10","11 à 20","21 à 35","36 à 55","56 à 80","> 80"],limitClimate:[5,10,20,35,55,80],unitClimate:"kCO²/m²/an"},i);return this.each(function(){var i,l,o,n,a,r,m,f,g=e(this)[0].getContext("2d"),s=["A","B","C","D","E","F","G"];e(this).css("background-color","#FFF");var F=t.size;g.canvas.width=F,g.canvas.height=F,e(this).is(".dpe-energy")?(i=e(this).data("energy"),l=t.captionEnergy,o=t.colorEnergy,n=t.rangeEnergy,a=t.limitEnergy,r=t.unitEnergy):e(this).is(".dpe-climate")&&(i=e(this).data("climate"),l=t.captionClimate,o=t.colorClimate,n=t.rangeClimate,a=t.limitClimate,r=t.unitClimate),260>F?(g.font="0.6em Arial",m="0.9em Arial",f=g.font,unitFont="bold 0.5em Arial"):F>=260&&360>F?(g.font="0.8em Arial",m="1.4em Arial",f=g.font,unitFont="bold 0.6em Arial"):(g.font="1em Arial",m="1.6em Arial",f=g.font,unitFont="bold 0.8em Arial");var T="#000",C=.115*F,c=.142*F,y="#000",E=.019*F,v=.134*F;g.fillStyle="#000",g.fillText(l[0],.011*F,.043*F),g.fillText(l[1],.011*F,.98*F),g.fillText(l[2],.74*F,.043*F),g.beginPath(),g.moveTo(.711*F,0),g.lineTo(.711*F,F),g.stroke();for(var d=[0,0,.153*F,.23*F,.153*F],h=[.057*F,.173*F,.173*F,.115*F,.057*F],u=0,p=0,b=0;7>b;b++)h[0]+=u,h[1]+=u,d[2]+=p,h[2]+=u,d[3]+=p,h[3]+=u,d[4]+=p,h[4]+=u,v+=u,C+=p,c+=u,g.font=m,g.fillStyle=T,g.fillText(s[b],C,c),g.globalCompositeOperation="destination-over",g.font=f,g.fillStyle=y,g.fillText(n[b],E,v),g.globalCompositeOperation="destination-over",g.fillStyle=o[b],g.beginPath(),g.moveTo(d[0],h[0]),g.lineTo(d[1],h[1]),g.lineTo(d[2],h[2]),g.lineTo(d[3],h[3]),g.lineTo(d[4],h[4]),g.fill(),u=.126*F,p=.076*F;var A=0;A=i<=a[0]?0:i>a[0]&&i<=a[1]?u:i>a[1]&&i<=a[2]?2*u:i>a[2]&&i<=a[3]?3*u:i>a[3]&&i<=a[4]?4*u:i>a[4]&&i<=a[5]?5*u:i>a[5]?6*u:0;var x=[F,F,.769*F,.73*F,.769*F],D=[.057*F+A,.173*F+A,.173*F+A,.115*F+A,.057*F+A];g.fillStyle="#000",g.beginPath(),g.moveTo(x[0],D[0]),g.lineTo(x[1],D[1]),g.lineTo(x[2],D[2]),g.lineTo(x[3],D[3]),g.lineTo(x[4],D[4]),g.fill(),g.globalCompositeOperation="destination-out",g.fillStyle="#FFF",g.beginPath(),g.moveTo(x[0]-.019*F,D[0]+.019*F),g.lineTo(x[1]-.019*F,D[1]-.019*F),g.lineTo(x[2]+.011*F,D[2]-.019*F),g.lineTo(x[3]+.023*F,D[3]),g.lineTo(x[4]+.011*F,D[4]+.019*F),g.fill(),g.globalCompositeOperation="source-over";var S=x[2]+.038*F,O=.146*F+A;g.font=m,g.fillStyle="#000",g.fillText(i,S,O),g.font=unitFont,g.fillText(r,S-.038*F,O+.076*F)})}}(jQuery);